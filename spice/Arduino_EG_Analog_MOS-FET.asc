Version 4
SHEET 1 1528 820
WIRE 432 -48 416 -48
WIRE -112 -32 -128 -32
WIRE 416 -32 416 -48
WIRE -128 -16 -128 -32
WIRE 688 0 608 0
WIRE 816 0 768 0
WIRE 608 32 608 0
WIRE -128 80 -128 64
WIRE 416 80 416 48
WIRE 544 80 416 80
WIRE 416 112 416 80
WIRE -112 144 -128 144
WIRE 608 144 608 128
WIRE -128 160 -128 144
WIRE 416 224 416 192
WIRE -128 256 -128 240
WIRE 368 304 352 304
WIRE 992 304 864 304
WIRE -112 320 -128 320
WIRE -128 336 -128 320
WIRE 416 336 416 320
WIRE 944 352 928 352
WIRE 928 368 928 352
WIRE 864 384 864 304
WIRE 896 384 864 384
WIRE 992 400 992 304
WIRE 992 400 960 400
WIRE 1040 400 992 400
WIRE 1120 400 1040 400
WIRE 592 416 528 416
WIRE 688 416 656 416
WIRE 816 416 816 0
WIRE 816 416 768 416
WIRE 896 416 816 416
WIRE -128 432 -128 416
WIRE 1040 432 1040 400
WIRE -112 512 -128 512
WIRE 592 512 528 512
WIRE 688 512 656 512
WIRE 816 512 816 416
WIRE 816 512 768 512
WIRE -128 528 -128 512
WIRE 1040 544 1040 512
WIRE 816 576 816 512
WIRE -128 624 -128 608
WIRE 816 672 816 640
FLAG 352 304 InvAttack
IOPIN 352 304 In
FLAG 528 416 Attack
IOPIN 528 416 In
FLAG 816 672 0
FLAG -128 432 0
FLAG -128 320 InvAttack
FLAG -128 144 Attack
FLAG -128 256 0
FLAG 1120 400 OUT
IOPIN 1120 400 Out
FLAG 416 336 0
FLAG 608 144 0
FLAG 416 -48 VCC
FLAG -128 80 0
FLAG -128 -32 VCC
FLAG 528 512 Gate
IOPIN 528 512 In
FLAG -128 512 Gate
FLAG -128 624 0
FLAG 928 432 0
FLAG 928 352 VCC
FLAG 1040 544 0
SYMBOL res 672 -16 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {Rdecay}
SYMBOL diode 592 432 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL res 672 400 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value {Rattack}
SYMBOL cap 800 576 R0
SYMATTR InstName C1
SYMATTR Value 22u
SYMBOL voltage -128 144 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value PULSE(0 5 0 1n 1n 0.1 0.5)
SYMBOL bv -128 320 R0
SYMATTR InstName B1
SYMATTR Value V=5-V(Attack)
SYMBOL pnp 544 128 M180
SYMATTR InstName Q1
SYMATTR Value QA1015
SYMBOL res 400 -48 R0
SYMATTR InstName R3
SYMATTR Value {15k-Rsustain}
SYMBOL res 400 96 R0
SYMATTR InstName R4
SYMATTR Value {Rsustain}
SYMBOL voltage -128 -32 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL res 784 496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value {Rrelease}
SYMBOL diode 656 496 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL voltage -128 512 R0
WINDOW 3 24 44 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 5 0 1n 1n 0.4 0.5)
SYMATTR InstName V2
SYMBOL nmos 368 224 R0
SYMATTR InstName M1
SYMATTR Value 2N7002
SYMBOL Opamps\\UniversalOpamp2 928 400 R0
SYMATTR InstName U1
SYMBOL res 1024 416 R0
SYMATTR InstName R6
SYMATTR Value 10k
TEXT 944 56 Left 2 !.param Rattack 4.7k
TEXT 944 248 Left 2 !.tran 0 10 9
TEXT 944 -8 Left 2 !.Model SW SW(Ron=10m Roff=10meg Vt=2.5)
TEXT 944 96 Left 2 !.param Rdecay 2.2k
TEXT 944 128 Left 2 !.param Rsustain 4k
TEXT 944 160 Left 2 !.param Rrelease 2.2k
